0907-31  
:guardsman: Сакаева Диана  
:smiley_cat: Загидуллина Камила  
:ok_woman: Шамуранова Елизавета  
  

# 1 Задание. Создание filesystem.c

## 1. Функция для поиска индекса файла в файловой системе

## find_index
- **Параметры**:
  - `fs`: 
    - Тип: `const FileSystem *`
    - Описание: Указатель на структуру `FileSystem`, которая содержит информацию о файлах в файловой системе. Используется для поиска файла по указанному пути.
  - `path`: 
    - Тип: `const char *`
    - Описание: Строка, представляющая путь к файлу. Функция будет сравнивать этот путь с путями файлов в файловой системе.

- **Возвращает**:
  - Тип: `int`
  - Описание: Индекс файла в массиве `entries` структуры `FileSystem`. Если файл не найден, возвращает -1.
  
```
static int find_index(const FileSystem *fs, const char *path) {
    for (size_t i = 0; i < fs->count; ++i)
        if (strcmp(fs->entries[i].path, path) == 0)
            return (int)i;
    return -1;
}  
```  

## 2. Функция открытия файла

## fs_load
- **Параметры**:
  - `fname`: 
    - Тип: `const char *`
    - Описание: Имя файла, который нужно открыть и загрузить в файловую систему. Это путь к файлу на диске.
  - `fs`: 
    - Тип: `FileSystem *`
    - Описание: Указатель на структуру `FileSystem`, в которую будут записаны данные загружаемого файла.

- **Возвращает**:
  - Тип: `int`
  - Описание: 
    - Возвращает 1, если файл успешно открыт и данные загружены.
    - Возвращает 0, если произошла ошибка при открытии файла (например, файл не найден). 

  
```
int fs_load(const char *fname, FileSystem *fs) {
    FILE *f = fopen(fname, "r");
    if (!f) {                        
        fs->entries = NULL;
        fs->count = 0;
        return 0;
}  
```
  

## 3. Код для удаления файла

## fs_delete
- **Параметры**:
  - `fs`: 
    - Тип: `FileSystem *`
    - Описание: Указатель на структуру `FileSystem`, из которой необходимо удалить файл. Этот указатель используется для модификации структуры файловой системы.
  - `path`: 
    - Тип: `const char *`
    - Описание: Строка, представляющая путь к файлу, который нужно удалить из файловой системы.

- **Возвращает**:
  - Тип: `int`
  - Описание:
    - Возвращает 0, если файл удален успешно.
    - Возвращает -1, если файл не найден, и, соответственно, не может быть удален.


```
int fs_delete(FileSystem *fs, const char *path) {
    int idx = find_index(fs, path);
    if (idx < 0) return -1;
    free(fs->entries[idx].path);
    free(fs->entries[idx].content);
    memmove(&fs->entries[idx], &fs->entries[idx + 1],
            (fs->count - idx - 1) * sizeof(FileEntry));
    fs->count--;
    return 0;
}  
```
